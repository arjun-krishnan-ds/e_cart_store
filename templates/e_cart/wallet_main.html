{% extends "core/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'e_cart/css/wallet.css' %}">
{% endblock %}

{% block content %}
<section class="wallet-dashboard">

    <div class="wallet-header">
        <h2>My Wallet</h2>
        <a href="{% url 'wallet_add_money' %}" class="btn-primary">
            + Add Money
        </a>
    </div>

    <div class="wallet-balance-card">
        <p>Available Balance</p>
        <h1>₹{{ wallet.balance }}</h1>
    </div>

    <div class="wallet-transactions">
        <h3>Recent Transactions</h3>

        {% if wallet.transactions.all %}
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Source</th>
                    <th>Type</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for txn in wallet.transactions.all %}
                <tr>
                    <td>{{ txn.created_at|date:"d M Y" }}</td>
                    <td>{{ txn.source }}</td>
                    <td class="{{ txn.transaction_type|lower }}">
                        {{ txn.transaction_type }}
                    </td>
                    <td>₹{{ txn.amount }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="empty">No transactions yet</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty">No transactions yet.</p>
        {% endif %}
    </div>

</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'e_cart/js/wallet.js' %}"></script>
{% endblock %}
